<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Navigator Ultra Pro Max</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
  body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: radial-gradient(circle at top, #0f2027, #203a43, #2c5364);
    color: #fff;
    overflow-x: hidden;
  }
  header {
    text-align: center;
    background: linear-gradient(90deg, #00b4db, #0083b0);
    padding: 18px;
    font-size: 1.8rem;
    font-weight: bold;
    letter-spacing: 1px;
    text-shadow: 0 0 10px #00eaff;
    box-shadow: 0 4px 30px rgba(0,0,0,0.4);
    border-bottom: 2px solid rgba(255,255,255,0.1);
  }
  .controls {
    text-align: center;
    padding: 20px;
    backdrop-filter: blur(10px);
    background: rgba(255,255,255,0.05);
    border-radius: 16px;
    margin: 15px;
    box-shadow: 0 0 30px rgba(0,0,0,0.4);
  }
  input, button {
    padding: 10px;
    margin: 5px;
    border-radius: 10px;
    border: none;
    outline: none;
    font-size: 1rem;
  }
  input {
    width: 230px;
    background: rgba(255,255,255,0.1);
    color: #fff;
  }
  input::placeholder {
    color: #ccc;
  }
  button {
    background: linear-gradient(90deg, #06b6d4, #0ea5e9);
    color: white;
    cursor: pointer;
    transition: 0.3s;
    box-shadow: 0 0 15px #06b6d4;
  }
  button:hover {
    background: linear-gradient(90deg, #0ea5e9, #22d3ee);
    box-shadow: 0 0 25px #22d3ee;
  }
  #map {
    height: 400px;
    width: 95%;
    border-radius: 15px;
    margin: 15px auto;
    box-shadow: 0 0 30px rgba(0,0,0,0.5);
  }
  .info-box {
    background: rgba(255,255,255,0.07);
    padding: 12px;
    margin: 10px auto;
    width: 90%;
    border-radius: 10px;
    box-shadow: 0 0 20px rgba(0,0,0,0.3);
    text-align: center;
  }
  .speed-stats {
    display: flex;
    justify-content: space-around;
    text-align: center;
  }
  canvas {
    display: block;
    margin: auto;
  }
</style>
</head>
<body>
<header>üöó AI Navigator ‚Äì Ultra Pro Max Edition</header>

<div class="controls">
  <input id="start" placeholder="Enter Start Location">
  <input id="end" placeholder="Enter Destination">
  <button onclick="calculateRoute()">üß≠ Find Route</button><br>
  <input id="fuel" type="number" placeholder="Fuel Price (per L)">
  <input id="mileage" type="number" placeholder="Mileage (km/L)">
  <button onclick="estimateFuel()">‚õΩ Estimate Fuel</button><br>
  <input id="placeName" placeholder="Enter any Location Name">
  <button onclick="getLatLng()">üìç Get Lat/Lng</button>
  <div id="geoOutput"></div>
</div>

<div id="map"></div>

<div id="output" class="info-box"></div>

<div id="speedDisplay" class="info-box">Speed: 0 km/h</div>
<div class="speed-stats">
  <div class="info-box" id="maxSpeedBox">üèé Max Speed: 0 km/h</div>
  <div class="info-box" id="avgSpeedBox">‚öôÔ∏è Avg Speed: 0 km/h</div>
</div>

<div class="info-box">
  <input id="speedLimit" type="number" placeholder="Set Speed Limit (km/h)">
  <button onclick="setSpeedLimit()">‚ö° Set Limit</button>
</div>

<canvas id="speedGraph" width="300" height="120"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
let map, directionsService, directionsRenderer, userMarker;
let speedData = [], maxSpeed = 0, totalSpeed = 0, count = 0, avgSpeed = 0;
let currentSpeed = 0, speedLimit = 80;
let ctx, speedChart;

// Initialize Google Map
function initMap() {
  map = new google.maps.Map(document.getElementById("map"), {
    zoom: 12,
    center: { lat: 23.8103, lng: 90.4125 },
    styles: [
      { featureType: "road", stylers: [{ color: "#334155" }] },
      { featureType: "water", stylers: [{ color: "#0ea5e9" }] },
      { featureType: "poi", stylers: [{ visibility: "off" }] }
    ]
  });
  directionsService = new google.maps.DirectionsService();
  directionsRenderer = new google.maps.DirectionsRenderer({ map: map });

  ctx = document.getElementById("speedGraph").getContext("2d");
  speedChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: [],
      datasets: [{
        label: 'Live Speed (km/h)',
        data: [],
        borderColor: '#00eaff',
        tension: 0.3
      }]
    },
    options: {
      plugins: { legend: { labels: { color: 'white' } } },
      scales: {
        x: { ticks: { color: 'white' } },
        y: { ticks: { color: 'white' }, min: 0 }
      }
    }
  });

  if (navigator.geolocation) {
    navigator.geolocation.watchPosition(updateLiveLocation, () => alert("Location access denied."));
  }
}

// Update live location, speed, AI traffic detection
function updateLiveLocation(pos) {
  const lat = pos.coords.latitude;
  const lng = pos.coords.longitude;
  const speed = pos.coords.speed ? (pos.coords.speed * 3.6).toFixed(1) : (Math.random() * 10).toFixed(1);
  currentSpeed = parseFloat(speed);
  
  if (userMarker) userMarker.setMap(null);
  userMarker = new google.maps.Marker({
    position: { lat, lng },
    map: map,
    icon: "https://maps.google.com/mapfiles/ms/icons/blue-dot.png",
  });
  map.setCenter({ lat, lng });

  document.getElementById("speedDisplay").innerText = `üö¶ Speed: ${currentSpeed} km/h`;

  speedData.push(currentSpeed);
  totalSpeed += currentSpeed;
  count++;
  avgSpeed = (totalSpeed / count).toFixed(1);
  if (currentSpeed > maxSpeed) maxSpeed = currentSpeed;

  document.getElementById("maxSpeedBox").innerText = `üèé Max Speed: ${maxSpeed} km/h`;
  document.getElementById("avgSpeedBox").innerText = `‚öôÔ∏è Avg Speed: ${avgSpeed} km/h`;

  // Update graph
  if (speedData.length > 20) speedData.shift();
  speedChart.data.labels.push("");
  if (speedChart.data.labels.length > 20) speedChart.data.labels.shift();
  speedChart.data.datasets[0].data = speedData;
  speedChart.update();

  // AI Traffic Alerts
  if (currentSpeed < 10 && Math.random() > 0.9) {
    showTrafficAlert("üöß Heavy Traffic Detected! Expect Delays");
  } else if (currentSpeed > speedLimit) {
    showTrafficAlert(`‚ö†Ô∏è Speed Limit Exceeded! (${currentSpeed} > ${speedLimit})`);
  }
}

function showTrafficAlert(msg) {
  const alertBox = document.createElement("div");
  alertBox.innerText = msg;
  alertBox.style.position = "fixed";
  alertBox.style.bottom = "30px";
  alertBox.style.left = "50%";
  alertBox.style.transform = "translateX(-50%)";
  alertBox.style.background = "rgba(255,0,0,0.8)";
  alertBox.style.padding = "10px 20px";
  alertBox.style.borderRadius = "10px";
  alertBox.style.color = "white";
  alertBox.style.boxShadow = "0 0 20px red";
  document.body.appendChild(alertBox);
  setTimeout(() => alertBox.remove(), 2500);
}

// Route Finder
function calculateRoute() {
  const start = document.getElementById("start").value;
  const end = document.getElementById("end").value;
  directionsService.route(
    { origin: start, destination: end, travelMode: "DRIVING" },
    (result, status) => {
      if (status === "OK") {
        directionsRenderer.setDirections(result);
        const distance = result.routes[0].legs[0].distance.text;
        const duration = result.routes[0].legs[0].duration.text;
        document.getElementById("output").innerHTML =
          `üõ£ Distance: ${distance} | ‚è± Duration: ${duration}`;
      } else {
        alert("‚ùå Route not found!");
      }
    }
  );
}

// Fuel Estimator
function estimateFuel() {
  const out = document.getElementById("output").innerText;
  const distanceMatch = out.match(/\d+(\.\d+)?/);
  if (!distanceMatch) return alert("Please find a route first!");
  const distance = parseFloat(distanceMatch[0]);
  const fuel = parseFloat(document.getElementById("fuel").value);
  const mileage = parseFloat(document.getElementById("mileage").value);
  const cost = ((distance / mileage) * fuel).toFixed(2);
  document.getElementById("output").innerHTML += `<br>üí∞ Fuel Cost: $${cost}`;
}

// Speed Limit Setter
function setSpeedLimit() {
  speedLimit = parseFloat(document.getElementById("speedLimit").value);
  alert(`‚úÖ Speed Limit set to ${speedLimit} km/h`);
}

// Get Lat/Lng by Location Name
function getLatLng() {
  const place = document.getElementById("placeName").value;
  const geocoder = new google.maps.Geocoder();
  geocoder.geocode({ address: place }, (results, status) => {
    if (status === "OK") {
      const lat = results[0].geometry.location.lat();
      const lng = results[0].geometry.location.lng();
      document.getElementById("geoOutput").innerHTML =
        `üìç <b>${place}</b><br>Latitude: ${lat}<br>Longitude: ${lng}`;
      map.setCenter({ lat, lng });
      new google.maps.Marker({ position: { lat, lng }, map: map });
    } else alert("‚ùå Location not found!");
  });
}
</script>
<script async src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap"></script>
</body>
</html>
