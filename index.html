<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Navigator Fleet Ultra</title>
<style>
body {
  margin: 0;
  font-family: "Poppins", sans-serif;
  background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color: #fff;
}
.container {
  max-width: 480px;
  margin: 15px auto;
  padding: 15px;
  background: rgba(255,255,255,0.1);
  border-radius: 15px;
}
input, button {
  width: 90%;
  padding: 10px;
  margin: 6px 0;
  border: none;
  border-radius: 10px;
  font-size: 16px;
  text-align: center;
}
button {
  background: #00b4d8;
  color: #fff;
  font-weight: bold;
  cursor: pointer;
  transition: 0.3s;
}
button:hover { background:#0096c7 }
#speedDisplay { font-size: 40px; color: #00ffcc; margin-top: 10px; }
.info { font-size: 15px; margin-top: 5px; }
#map { width: 100%; height: 300px; background: #111; border-radius: 10px; margin-top: 10px; position: relative; overflow: hidden; }
.car-icon { width: 32px; height: 32px; position: absolute; transform: translate(-50%, -50%); }
#graph { width: 100%; height: 100px; background: rgba(255,255,255,0.1); border-radius: 8px; overflow: hidden; position: relative; margin-top:10px;}
.bar { position: absolute; bottom:0; width:3px; background:lime; }
</style>
</head>
<body>
<h1 style="text-align:center">üöó AI Navigator Fleet Ultra</h1>
<div class="container">
  <input type="text" id="username" placeholder="‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ (‡¶Ø‡ßá‡¶Æ‡¶® Saimon)">
  <input type="number" id="speedLimit" placeholder="‡¶∏‡ßç‡¶™‡¶ø‡¶° ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü (km/h)">
  <input type="number" id="destination" placeholder="‡¶ó‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶¶‡ßÇ‡¶∞‡¶§‡ßç‡¶¨ (km)">
  <input type="number" id="fuelEff" placeholder="‡¶Æ‡¶æ‡¶á‡¶≤‡ßá‡¶ú (km/L)">
  <input type="number" id="fuelPrice" placeholder="‡¶´‡ßÅ‡¶Ø‡¶º‡ßá‡¶≤ ‡¶¶‡¶æ‡¶Æ (‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶≤‡¶ø‡¶ü‡¶æ‡¶∞)">
  <button id="startBtn">‚ñ∂Ô∏è Start Navigation</button>

  <div id="speedDisplay">0.000 km/h</div>
  <div class="info" id="efficiency">üü¢ Efficient Driving</div>
  <div class="info" id="traffic">Traffic: üü¢ Smooth</div>
  <div class="info" id="maxAvg">Max: 0.000 | Avg: 0.000</div>
  <div class="info" id="eta">ETA: ‚Äî</div>
  <div class="info" id="fuel">Fuel Used: 0.00L | Cost: 0.00‡ß≥</div>
  <div class="info" id="direction">Direction: ‚Äî</div>
  <div class="info" id="risk">Safe Zone: üü¢ Safe</div>

  <div id="map"><img src="https://i.postimg.cc/3xn9Sd08/car.png" class="car-icon" id="carIcon"></div>
  <div id="graph"></div>

  <button id="resetBtn">üîÑ Reset</button>
</div>

<script>
// Variables
let speed=0, maxSpeed=0, avgSpeed=0, totalSpeed=0, count=0;
let speedLimit=60, userName="";
let destination=0, distanceCovered=0;
let fuelEff=15, fuelPrice=120;
let alertActive=false;
let isNavigating=false;
let directionIndex=0, bars=[];
const directions=[
  "‡¶∏‡ßã‡¶ú‡¶æ ‡¶∏‡¶æ‡¶Æ‡¶®‡ßá ‡¶Ø‡¶æ‡¶ì",
  "‡¶¨‡¶æ‡¶Æ‡¶¶‡¶ø‡¶ï‡ßá ‡¶Ø‡¶æ‡¶ì",
  "‡¶°‡¶æ‡¶®‡¶¶‡¶ø‡¶ï‡ßá ‡¶Æ‡ßã‡¶°‡¶º ‡¶®‡¶æ‡¶ì",
  "‡¶∏‡ßã‡¶ú‡¶æ ‡¶∏‡¶æ‡¶Æ‡¶®‡ßá ‡¶Ø‡¶æ‡¶ì",
  "‡¶ó‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø‡ßá ‡¶™‡ßå‡¶Å‡¶õ‡ßá ‡¶ó‡ßá‡¶õ‡ßã"
];
const riskZones=[
  {start:0,end:2,type:"High"},
  {start:2,end:5,type:"Medium"},
  {start:5,end:10,type:"Low"}
];

const speedDisplay=document.getElementById("speedDisplay");
const efficiency=document.getElementById("efficiency");
const traffic=document.getElementById("traffic");
const graph=document.getElementById("graph");
const directionText=document.getElementById("direction");
const etaText=document.getElementById("eta");
const fuelText=document.getElementById("fuel");
const riskText=document.getElementById("risk");
const carIcon=document.getElementById("carIcon");
const map=document.getElementById("map");

// Start button
document.getElementById("startBtn").addEventListener("click",()=>{
  if(isNavigating) return;
  userName=document.getElementById("username").value.trim();
  speedLimit=parseFloat(document.getElementById("speedLimit").value)||60;
  destination=parseFloat(document.getElementById("destination").value)||10;
  fuelEff=parseFloat(document.getElementById("fuelEff").value)||15;
  fuelPrice=parseFloat(document.getElementById("fuelPrice").value)||120;
  isNavigating=true;
  simulateSpeed();
  simulateDirections();
});

// Reset
document.getElementById("resetBtn").addEventListener("click",()=>{
  speed=0; maxSpeed=0; avgSpeed=0; totalSpeed=0; count=0;
  distanceCovered=0; directionIndex=0; isNavigating=false;
  bars.forEach(b=>graph.removeChild(b)); bars=[];
  carIcon.style.left="50%"; carIcon.style.top="50%";
  updateDisplay();
});

// Speed Simulation
function simulateSpeed(){
  setInterval(()=>{
    if(!isNavigating) return;
    let delta=(Math.random()-0.5)*3;
    speed=Math.max(0,Math.min(speed+delta,120));
    maxSpeed=Math.max(maxSpeed,speed);
    totalSpeed+=speed; count++;
    avgSpeed=totalSpeed/count;
    distanceCovered+=speed/3600;
    if(distanceCovered>=destination){
      isNavigating=false;
      speak("‡¶Ü‡¶™‡¶®‡¶ø ‡¶ó‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø‡ßá ‡¶™‡ßå‡¶Å‡¶õ‡ßá ‡¶ó‡ßá‡¶õ‡ßá‡¶®‡•§");
      directionText.textContent="Direction: ‡¶ó‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø‡ßá ‡¶™‡ßå‡¶Å‡¶õ‡ßá ‡¶ó‡ßá‡¶õ‡ßã";
      riskText.textContent="Safe Zone: üü¢ Safe";
    }
    updateDisplay();
    drawGraph(speed);
    moveCar(distanceCovered/destination);
    if(speed>speedLimit && !alertActive){
      alertActive=true; saySpeedAlert();
    } else if(speed<=speedLimit) alertActive=false;
    checkRiskZone();
  },1000);
}

// Update Display
function updateDisplay(){
  speedDisplay.textContent=speed.toFixed(3)+" km/h";
  document.getElementById("maxAvg").textContent=
    `Max: ${maxSpeed.toFixed(3)} | Avg: ${avgSpeed.toFixed(3)}`;
  efficiency.textContent=speed<speedLimit*0.9?"üü¢ Efficient Driving":"‚ö†Ô∏è High Speed";
  efficiency.style.color=speed<speedLimit*0.9?"#0f0":"#ff0";
  traffic.textContent=speed<20?"Traffic: üî¥ Heavy":speed<40?"Traffic: üü† Moderate":"Traffic: üü¢ Smooth";
  let remainingDist=Math.max(destination-distanceCovered,0);
  let etaHours=(speed>0)?remainingDist/speed:Infinity;
  if(isFinite(etaHours)){
    let etaMins=etaHours*60;
    etaText.textContent=`ETA: ${etaMins.toFixed(1)} min (${remainingDist.toFixed(2)} km left)`;
  }
  let fuelUsed=distanceCovered/fuelEff;
  let cost=fuelUsed*fuelPrice;
  fuelText.textContent=`Fuel Used: ${fuelUsed.toFixed(2)}L | Cost: ${cost.toFixed(2)}‡ß≥`;
}

// Directions Simulation
function simulateDirections(){
  let delay=7000;
  function nextDirection(){
    if(!isNavigating || directionIndex>=directions.length) return;
    let dir=directions[directionIndex];
    directionText.textContent="Direction: "+dir;
    speak(dir);
    directionIndex++;
    setTimeout(nextDirection,delay);
  }
  nextDirection();
}

// Voice Alerts
function saySpeedAlert(){
  const msg=new SpeechSynthesisUtterance(
    `‡¶è‡¶á ${userName||"‡¶°‡ßç‡¶∞‡¶æ‡¶á‡¶≠‡¶æ‡¶∞"}, ‡¶ó‡¶æ‡¶°‡¶º‡¶ø‡¶∞ ‡¶∏‡ßç‡¶™‡¶ø‡¶° ‡¶ï‡¶Æ‡¶æ‡¶ì!`
  );
  msg.lang="bn-BD";
  speechSynthesis.speak(msg);
  if(alertActive) setTimeout(saySpeedAlert,4000);
}

function speak(text){
  const msg=new SpeechSynthesisUtterance(text);
  msg.lang="bn-BD";
  speechSynthesis.speak(msg);
}

// Graph
function drawGraph(currentSpeed){
  const bar=document.createElement("div");
  bar.classList.add("bar");
  bar.style.height=(currentSpeed*1.2)+"px";
  bar.style.left=graph.clientWidth+"px";
  graph.appendChild(bar);
  bars.push(bar);
  bars.forEach(b=>{
    b.style.left=(parseFloat(b.style.left)-3)+"px";
    if(parseFloat(b.style.left)<-3){
      graph.removeChild(b);
      bars.shift();
    }
  });
}

// Risk Zone
function checkRiskZone(){
  let zone=riskZones.find(rz=>distanceCovered>=rz.start && distanceCovered<=rz.end);
  if(zone){
    if(zone.type==="High"){ riskText.textContent="Safe Zone: ‚ö†Ô∏è Risk Zone"; speak("‡¶∏‡¶æ‡¶¨‡¶ß‡¶æ‡¶®! ‡¶∞‡¶æ‡¶∏‡ßç‡¶§‡¶æ ‡¶¨‡¶ø‡¶™‡¶ú‡ßç‡¶ú‡¶®‡¶ï ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§"); }
    else if(zone.type==="Medium"){ riskText.textContent="Safe Zone: üü° Medium Risk"; }
    else riskText.textContent="Safe Zone: üü¢ Safe";
  }
}

// Car Movement on Map
function moveCar(progress){
  const x=50+progress*200; // simple horizontal movement
  carIcon.style.left=x+"px";
}
</script>
</body>
</html>
